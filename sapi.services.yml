services:
  sapi.dispatcher:
    class: Drupal\sapi\Dispatcher
    arguments: ["@config.manager", "@current_user", "@current_route_match", "@plugin.manager.sapi_action_handler", "@service_container"]

  plugin.manager.sapi_action_type:
    class: Drupal\sapi\ActionTypeManager
    parent: default_plugin_manager
  plugin.manager.sapi_action_handler:
    class: Drupal\sapi\ActionHandlerManager
    parent: default_plugin_manager

  sapi.master_event_subscriber:
    class: Drupal\sapi\EventSubscriber\MasterSubscriber
    arguments: ["@current_route_match", "@entity_type.manager", "@plugin.manager.sapi_action_type", "@current_user", "@sapi.dispatcher"]
    tags:
      - { name: event_subscriber }

